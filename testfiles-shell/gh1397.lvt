\documentclass{article}
\input{pgf-regression-test}

\usepackage{tikz}

\begin{document}

\START

\BEGINTEST{no .gnuplot}
\begin{tikzpicture}
  \draw[id=normal] plot[domain=-2:2] function {x**2};
\end{tikzpicture}

\SHOWFILE{\jobname.normal.gnuplot}
\ENDTEST

\BEGINTEST{no .gnuplot, leading space in function}
\begin{tikzpicture}
  \draw[id=leading-space] plot[domain=-2:2] function { x**2};
\end{tikzpicture}

\SHOWFILE{\jobname.leading-space.gnuplot}
\ENDTEST

\BEGINTEST{no .gnuplot, trailing space in function}
\begin{tikzpicture}
  \draw[id=trailing-space] plot[domain=-2:2] function {x**2 };
\end{tikzpicture}

\SHOWFILE{\jobname.trailing-space.gnuplot}
\ENDTEST

\BEGINTEST{.gnuplot existing and matched}
\begin{tikzpicture}
  \draw[id=normal] plot[domain=-2:2] function {x**2};
  \draw[id=leading-space] plot[domain=-2:2] function { x**2};
  \draw[id=trailing-space] plot[domain=-2:2] function {x**2 };
\end{tikzpicture}
\ENDTEST

\BEGINTEST{.gnuplot existing but outdated}
\begin{tikzpicture}
  % use the existing id but a different domain
  \draw[id=normal] plot[domain=-4:4] function {x**2};
\end{tikzpicture}

\SHOWFILE{\jobname.normal.gnuplot}
\ENDTEST

\END
